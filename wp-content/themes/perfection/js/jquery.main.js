$(function(){$.each($(".drop-menu"),function(){new Menu($(this))}),$.each($(".preloader"),function(){new Preloader($(this))}),$.each($(".pixel-grid__slider"),function(){new SliderSingle($(this))}),$.each($(".formats__slider"),function(){new SliderFormats($(this))}),$.each($(".tabs"),function(){new Tabs($(this))})});var Menu=function(e){var i,n=e,t=$(".drop-menu-btn"),a=$(".site__header"),o=$(".pages__item"),s=(n.find(".drop-menu__inner-wrap"),!1),r=$(window),d=function(){t.on({click:function(){a.hasClass("site__header_drop-menu")?(a.removeClass("site__header_drop-menu"),$("body").css("overflow","visible")):(a.addClass("site__header_drop-menu"),$("body").css("overflow","hidden"))}}),r.on({scroll:function(){o.each(function(){var e=$(this).offset().top,i=$(this).height(),n=160;e<=r.scrollTop()&&(a.removeClass("white"),a.addClass($(this).data("header-color"))),e-n<=r.scrollTop()&&e+i+n>=r.scrollTop()&&$(this).addClass("active")}),s=r.scrollTop()>=a.innerHeight()},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;c(n)}},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;c(n)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>i?c(-1):i>n&&c(1),i=n}})},c=function(e){e>0&&!a.hasClass("site__header_hidden")&&s&&a.addClass("site__header_hidden"),0>e&&a.hasClass("site__header_hidden")&&s&&a.removeClass("site__header_hidden")},l=function(){self._myScroll=new IScroll("#scroll-wrap",{mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale"})},f=function(){l(),d()};f()},Preloader=function(e){var i=e,n=i.data("delay"),t=$(window),a=function(){t.on({load:function(){setTimeout(function(){i.addClass("hide"),setTimeout(function(){i.remove()},400)},n)}})},o=function(){a()};o()},SliderFormats=function(e){var i,n=this,t=e,a=t.find(">div"),o=a.find(".formats__slider-item"),s=o.find(".formats__slider-arrow"),r=a.find(".formats__slider-text"),d=r.find(">div"),c=0,l=$(window),f=function(){o.on({mouseenter:function(){l.width()>=992&&u($(this))}}),o.on({click:function(){return l.width()<992&&(u($(this)),clearInterval(i),h()),!1}}),t.on({mouseenter:function(){clearInterval(i)},mouseleave:function(){h()}}),l.on({resize:function(){v()}})},u=function(e){var n=e.index(),t=d.eq(n);o.removeClass("active"),e.addClass("active"),d.removeClass("visible"),t.addClass("visible"),clearInterval(i)},v=function(){c=l.width()<768?20:l.width()>=768&&l.width()<1200?70:54;var e=(a.width()+c)/2+"px",i=-90,n=o.length,t=360/n;o.each(function(n){var a=$(this),o=t*n+i,s=-1*o;a.css({"-webkit-transform":"rotate("+o+"deg) translate("+e+") rotate("+s+"deg)",transform:"rotate("+o+"deg) translate("+e+") rotate("+s+"deg)"})}),s.each(function(e){var n=$(this),a=t*e+i,o=-1*a,s=t*e;n.css({"-webkit-transform":"rotate("+a+"deg) rotate("+(o+s)+"deg)",transform:"rotate("+a+"deg) rotate("+(o+s)+"deg)"})})},h=function(){i=setInterval(function(){var e=o.filter(".active"),i=e.next(),n=i.index(),t=d.eq(n);-1==i.index()&&(i=o.eq(0),t=d.eq(0)),o.removeClass("active"),d.removeClass("visible"),i.addClass("active"),t.addClass("visible")},5e3)},_=function(){setTimeout(function(){var e=o.filter(".active"),i=e.index(),n=d.eq(i);n.addClass("visible"),r.addClass("visible-text"),h()},2e3)},m=function(){t[0].obj=n,v(),_(),f()};m()},SliderSingle=function(e){var i,n=this,t=e,a=t.find(".swiper-container"),o=function(){i=new Swiper(a,{pagination:$(".swiper-pagination"),paginationClickable:!0,loop:!0})},s=function(){o(),t[0].obj=n};s()},Tabs=function(e){var i=e,n=$(window),t=$("body"),a=i.find(".tabs__controls-wrap > div"),o=a.find("> span"),s=i.find(".tabs__wrapper"),r=i.find(".tabs__controls-wrap"),d=s.find("> div"),c=function(){n.on({load:function(){l()}}),o.on({mousedown:function(){s.css({height:s.innerHeight()},300)},mouseup:function(){var e=$(this),i=e.parent(),n=i.index(),t=d.eq(n),a=t.innerHeight();s.animate({height:a},300),setTimeout(function(){s.css({height:""})},400)},click:function(){var e=$(this),i=e.parent(),n=i.index();a.removeClass("active"),a.eq(n).addClass("active"),f(n),r.removeClass("active")}}),t.on({click:function(){r.removeClass("active")}})},l=function(){var e=a.filter(".active").index();"-1"==e&&(e=0,a.eq(e).addClass("active")),f(e)},f=function(e){var i=d.eq(e);d.css({display:"none"}),i.css({display:"block"})},u=function(){c()};u()};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiTWVudSIsInRoaXMiLCJQcmVsb2FkZXIiLCJTbGlkZXJTaW5nbGUiLCJTbGlkZXJGb3JtYXRzIiwiVGFicyIsIm9iaiIsIl9sYXN0UG9zIiwiX29iaiIsIl9idG4iLCJfaGVhZGVyIiwiX3NpdGVTZWN0aW9ucyIsIl9hY3Rpb24iLCJmaW5kIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9vbkV2ZW50cyIsIm9uIiwiY2xpY2siLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3NzIiwiYWRkQ2xhc3MiLCJzY3JvbGwiLCJzaXRlU2VjdGlvbnNUb3AiLCJvZmZzZXQiLCJ0b3AiLCJzaXRlU2VjdGlvbnNIZWlnaHQiLCJoZWlnaHQiLCJzcGFjZUJlZm9yZUJsb2MiLCJzY3JvbGxUb3AiLCJkYXRhIiwiaW5uZXJIZWlnaHQiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsInRvdWNobW92ZSIsImN1cnJlbnRQb3MiLCJ0b3VjaGVzIiwiY2xpZW50WSIsIl9pbml0Q29udGVudFNjcm9sbCIsInNlbGYiLCJfbXlTY3JvbGwiLCJJU2Nyb2xsIiwibW91c2VXaGVlbCIsInNjcm9sbGJhcnMiLCJpbnRlcmFjdGl2ZVNjcm9sbGJhcnMiLCJzaHJpbmtTY3JvbGxiYXJzIiwiaW5pdCIsIl9kZWxheSIsImxvYWQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiX2luaXQiLCJfdGltZXIiLCJfc2VsZiIsIl9vYmpJbm5lciIsIl9pdGVtcyIsIl9pdGVtc0Fycm93IiwiX3RleHQiLCJfdGV4dEl0ZW1zIiwiX2Rpc3RhbmNlIiwiX2FkZEV2ZW50cyIsIm1vdXNlZW50ZXIiLCJ3aWR0aCIsIl9jaGFuZ2VUZXh0IiwiY2xlYXJJbnRlcnZhbCIsIl9jaGFuZ2VOZXh0IiwibW91c2VsZWF2ZSIsInJlc2l6ZSIsIl9wb3NpdGlvbkl0ZW1zIiwiaXRlbSIsIml0ZW1JbmRleCIsImluZGV4IiwidGV4dEJsb2NrIiwiZXEiLCJyYWRpdXMiLCJzdGFydCIsIm51bWJlck9mRWxlbWVudHMiLCJsZW5ndGgiLCJzbGljZSIsImkiLCJjdXJJdGVtIiwicm90YXRlIiwicm90YXRlUmV2ZXJzZSIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwicm90YXRlMiIsInNldEludGVydmFsIiwiYWN0aXZlSXRlbSIsImZpbHRlciIsIm5leHRJdGVtIiwibmV4dCIsIm5leHRJdGVtSW5kZXgiLCJjdXJyZW50VGV4dEJsb2NrIiwiX3N0YXJ0VmlldyIsImFjdGl2ZUl0ZW1JbmRleCIsIl9zbGlkZXJTd2lwZXIiLCJfc2xpZGVyIiwiX2luaXRTbGlkZXIiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsaWNrYWJsZSIsImxvb3AiLCJfYm9keSIsIl90YWJCdG4iLCJfdGFiQnRuSW5uZXIiLCJfdGFiQ29udGVudCIsIl9jb250cm9scyIsIl90YWJDb250ZW50SXRlbSIsIl9zaG93Q29udGVudFdoZW5Mb2FkaW5nIiwibW91c2Vkb3duIiwibW91c2V1cCIsInBhcmVudCIsImFjdGl2ZUNvbnRlbnQiLCJhY3RpdmVDb250ZW50SGVpZ2h0IiwiYW5pbWF0ZSIsIl9zaG93Q29udGVudCIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFLFdBRUVBLEVBQUVDLEtBQU1ELEVBQUcsY0FBZ0IsV0FDdkIsR0FBS0UsTUFBTUYsRUFBR0csU0FHbEJILEVBQUVDLEtBQU1ELEVBQUcsY0FBZ0IsV0FDdkIsR0FBSUksV0FBV0osRUFBR0csU0FHdEJILEVBQUVDLEtBQU1ELEVBQUUsdUJBQXdCLFdBQzlCLEdBQUlLLGNBQWNMLEVBQUdHLFNBR3pCSCxFQUFFQyxLQUFNRCxFQUFFLG9CQUFxQixXQUMzQixHQUFJTSxlQUFlTixFQUFHRyxTQUcxQkgsRUFBRUMsS0FBTUQsRUFBRyxTQUFX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Y2goICQoICcuZHJvcC1tZW51JyApLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbmV3ICBNZW51KCAkKCB0aGlzICkgKTtcbiAgICB9ICk7XG5cbiAgICAkLmVhY2goICQoICcucHJlbG9hZGVyJyApLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbmV3IFByZWxvYWRlciggJCggdGhpcyApICk7XG4gICAgfSApO1xuXG4gICAgJC5lYWNoKCAkKCcucGl4ZWwtZ3JpZF9fc2xpZGVyJyksIGZ1bmN0aW9uKCkge1xuICAgICAgICBuZXcgU2xpZGVyU2luZ2xlKCAkKCB0aGlzICkgKTtcbiAgICB9ICk7XG5cbiAgICAkLmVhY2goICQoJy5mb3JtYXRzX19zbGlkZXInKSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIG5ldyBTbGlkZXJGb3JtYXRzKCAkKCB0aGlzICkgKTtcbiAgICB9ICk7XG5cbiAgICAkLmVhY2goICQoICcudGFicycgKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBuZXcgVGFicyggJCggdGhpcyApICk7XG4gICAgfSk7XG59KTtcblxudmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgIF9idG4gPSAkKCAnLmRyb3AtbWVudS1idG4nICksXG4gICAgICAgIF9oZWFkZXIgPSAkKCAnLnNpdGVfX2hlYWRlcicgKSxcbiAgICAgICAgX3NpdGVTZWN0aW9ucyA9ICQoICcucGFnZXNfX2l0ZW0nICksXG4gICAgICAgIF9tZW51Q29udGVudCA9IF9vYmouZmluZCggJy5kcm9wLW1lbnVfX2lubmVyLXdyYXAnKSxcbiAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICBfbGFzdFBvcyxcbiAgICAgICAgX215U2Nyb2xsLFxuICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICk7XG5cbiAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfYnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfaGVhZGVyLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2Ryb3AtbWVudScgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZHJvcC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnYm9keScpLmNzcyAoICdvdmVyZmxvdycsICd2aXNpYmxlJyApXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfZHJvcC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnYm9keScpLmNzcyAoICdvdmVyZmxvdycsICdoaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfc2l0ZVNlY3Rpb25zLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpdGVTZWN0aW9uc1RvcCA9ICQoIHRoaXMgKS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZVNlY3Rpb25zSGVpZ2h0ID0gJCggdGhpcyApLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlQmVmb3JlQmxvYyA9IDE2MDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHNpdGVTZWN0aW9uc1RvcCA8PSBfd2luZG93LnNjcm9sbFRvcCgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoICd3aGl0ZScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAkKCB0aGlzICkuZGF0YSggJ2hlYWRlci1jb2xvcicgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggKCBzaXRlU2VjdGlvbnNUb3AgLSBzcGFjZUJlZm9yZUJsb2MgPD0gX3dpbmRvdy5zY3JvbGxUb3AoKSApICYmICggc2l0ZVNlY3Rpb25zVG9wICsgc2l0ZVNlY3Rpb25zSGVpZ2h0ICsgc3BhY2VCZWZvcmVCbG9jID49IF93aW5kb3cuc2Nyb2xsVG9wKCkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuYWRkQ2xhc3MoICdhY3RpdmUnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfaGVhZGVyLmlubmVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnRE9NTW91c2VTY3JvbGwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnbW91c2V3aGVlbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAndG91Y2htb3ZlJzogZnVuY3Rpb24gKCBlICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBvcyA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VycmVudFBvcyA+IF9sYXN0UG9zICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAtMSApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXJyZW50UG9zIDwgX2xhc3RQb3MgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIDEgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfbGFzdFBvcyA9IGN1cnJlbnRQb3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApXG4gICAgICAgIH0sXG4gICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCBkaXJlY3Rpb24gKXtcbiAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPiAwICYmICFfaGVhZGVyLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiBfYWN0aW9uICkge1xuICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPCAwICYmIF9oZWFkZXIuaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmIF9hY3Rpb24gKSB7XG4gICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgX2luaXRDb250ZW50U2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9teVNjcm9sbCA9IG5ldyBJU2Nyb2xsKCAnI3Njcm9sbC13cmFwJyAsIHtcbiAgICAgICAgICAgICAgICBtb3VzZVdoZWVsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNjcm9sbGJhcnM6IHRydWUsXG4gICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JvbGxiYXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNocmlua1Njcm9sbGJhcnM6ICdzY2FsZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfaW5pdENvbnRlbnRTY3JvbGwoKTtcbiAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICB9O1xuXG4gICAgaW5pdCgpXG59O1xuXG52YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgX2RlbGF5ID0gX29iai5kYXRhKCAnZGVsYXknICksXG4gICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKTtcblxuICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgX2RlbGF5ICk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgIH07XG5cbiAgICBfaW5pdCgpO1xufTtcblxudmFyIFNsaWRlckZvcm1hdHMgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgIF9vYmpJbm5lciA9IF9vYmouZmluZCgnPmRpdicpLFxuICAgICAgICBfaXRlbXMgPSBfb2JqSW5uZXIuZmluZCgnLmZvcm1hdHNfX3NsaWRlci1pdGVtJyksXG4gICAgICAgIF9pdGVtc0Fycm93ID0gX2l0ZW1zLmZpbmQoJy5mb3JtYXRzX19zbGlkZXItYXJyb3cnKSxcbiAgICAgICAgX3RleHQgPSBfb2JqSW5uZXIuZmluZCgnLmZvcm1hdHNfX3NsaWRlci10ZXh0JyksXG4gICAgICAgIF90ZXh0SXRlbXMgPSBfdGV4dC5maW5kKCc+ZGl2JyksXG4gICAgICAgIF90aW1lcixcbiAgICAgICAgX2Rpc3RhbmNlID0gMCxcbiAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KTtcblxuICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIF9pdGVtcy5vbih7XG4gICAgICAgICAgICAgICAgJ21vdXNlZW50ZXInOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF93aW5kb3cud2lkdGgoKSA+PSA5OTIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZVRleHQoJCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfaXRlbXMub24oe1xuICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3dpbmRvdy53aWR0aCgpIDwgOTkyKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VUZXh0KCQodGhpcykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aW1lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VOZXh0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF9vYmoub24oe1xuXG4gICAgICAgICAgICAgICAgJ21vdXNlZW50ZXInOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGltZXIpO1xuXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICdtb3VzZWxlYXZlJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VOZXh0KCk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfd2luZG93Lm9uKHtcbiAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9wb3NpdGlvbkl0ZW1zKCk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuICAgICAgICBfY2hhbmdlVGV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cbiAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSBpdGVtLmluZGV4KCksXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrID0gX3RleHRJdGVtcy5lcShpdGVtSW5kZXgpO1xuXG4gICAgICAgICAgICBfaXRlbXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICBpdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgX3RleHRJdGVtcy5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICB0ZXh0QmxvY2suYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGltZXIpO1xuXG4gICAgICAgIH0sXG4gICAgICAgIF9wb3NpdGlvbkl0ZW1zID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoX3dpbmRvdy53aWR0aCgpIDwgNzY4KSB7XG5cbiAgICAgICAgICAgICAgICBfZGlzdGFuY2UgPSAyMDtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChfd2luZG93LndpZHRoKCkgPj0gNzY4ICYmIF93aW5kb3cud2lkdGgoKSA8IDEyMDApIHtcblxuICAgICAgICAgICAgICAgIF9kaXN0YW5jZSA9IDcwO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgX2Rpc3RhbmNlID0gNTQ7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IChfb2JqSW5uZXIud2lkdGgoKSArIF9kaXN0YW5jZSkgLyAyICsgJ3B4JyxcbiAgICAgICAgICAgICAgICBzdGFydCA9IC05MCxcbiAgICAgICAgICAgICAgICBudW1iZXJPZkVsZW1lbnRzID0gX2l0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzbGljZSA9IDM2MCAvIG51bWJlck9mRWxlbWVudHM7XG5cbiAgICAgICAgICAgIF9pdGVtcy5lYWNoKGZ1bmN0aW9uIChpKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZSA9IHNsaWNlICogaSArIHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICByb3RhdGVSZXZlcnNlID0gcm90YXRlICogLTE7XG5cbiAgICAgICAgICAgICAgICBjdXJJdGVtLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIHJvdGF0ZSArICdkZWcpIHRyYW5zbGF0ZSgnICsgcmFkaXVzICsgJykgcm90YXRlKCcgKyByb3RhdGVSZXZlcnNlICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgcm90YXRlICsgJ2RlZykgdHJhbnNsYXRlKCcgKyByYWRpdXMgKyAnKSByb3RhdGUoJyArIHJvdGF0ZVJldmVyc2UgKyAnZGVnKSdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF9pdGVtc0Fycm93LmVhY2goZnVuY3Rpb24gKGkpIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlID0gc2xpY2UgKiBpICsgc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZVJldmVyc2UgPSByb3RhdGUgKiAtMSxcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlMiA9IHNsaWNlICogaTtcblxuICAgICAgICAgICAgICAgIGN1ckl0ZW0uY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgcm90YXRlICsgJ2RlZykgcm90YXRlKCcgKyAocm90YXRlUmV2ZXJzZSArIHJvdGF0ZTIpICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgcm90YXRlICsgJ2RlZykgcm90YXRlKCcgKyAocm90YXRlUmV2ZXJzZSArIHJvdGF0ZTIpICsgJ2RlZyknXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBfY2hhbmdlTmV4dCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgX3RpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUl0ZW0gPSBfaXRlbXMuZmlsdGVyKCcuYWN0aXZlJyksXG4gICAgICAgICAgICAgICAgICAgIG5leHRJdGVtID0gYWN0aXZlSXRlbS5uZXh0KCksXG4gICAgICAgICAgICAgICAgICAgIG5leHRJdGVtSW5kZXggPSBuZXh0SXRlbS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dEJsb2NrID0gX3RleHRJdGVtcy5lcShuZXh0SXRlbUluZGV4KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0SXRlbS5pbmRleCgpID09IC0xKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0gPSBfaXRlbXMuZXEoMCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0QmxvY2sgPSBfdGV4dEl0ZW1zLmVxKDApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2l0ZW1zLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIF90ZXh0SXRlbXMucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgIG5leHRJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0QmxvY2suYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgfSwgNTAwMCk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgX3N0YXJ0VmlldyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlSXRlbSA9IF9pdGVtcy5maWx0ZXIoJy5hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbUluZGV4ID0gYWN0aXZlSXRlbS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dEJsb2NrID0gX3RleHRJdGVtcy5lcShhY3RpdmVJdGVtSW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgY3VycmVudFRleHRCbG9jay5hZGRDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgX3RleHQuYWRkQ2xhc3MoJ3Zpc2libGUtdGV4dCcpO1xuXG4gICAgICAgICAgICAgICAgX2NoYW5nZU5leHQoKTtcblxuICAgICAgICAgICAgfSwgMjAwMCk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICBfcG9zaXRpb25JdGVtcygpO1xuICAgICAgICAgICAgX3N0YXJ0VmlldygpO1xuICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICB9O1xuXG4gICAgX2luaXQoKTtcbn07XG5cbnZhciBTbGlkZXJTaW5nbGUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgIF9zbGlkZXJTd2lwZXIsXG4gICAgICAgIF9zbGlkZXIgPSBfb2JqLmZpbmQoJy5zd2lwZXItY29udGFpbmVyJyk7XG5cbiAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgIHZhciBfaW5pdFNsaWRlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgX3NsaWRlclN3aXBlciA9IG5ldyBTd2lwZXIoX3NsaWRlciwge1xuXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogJCgnLnN3aXBlci1wYWdpbmF0aW9uJyksXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlXG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG4gICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBfaW5pdFNsaWRlcigpO1xuICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcblxuICAgICAgICB9O1xuXG4gICAgX2luaXQoKTtcbn07XG5cbnZhciBUYWJzID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcbiAgICAgICAgX3RhYkJ0biA9IF9vYmouZmluZCggJy50YWJzX19jb250cm9scy13cmFwID4gZGl2JyApLFxuICAgICAgICBfdGFiQnRuSW5uZXIgPSBfdGFiQnRuLmZpbmQoICc+IHNwYW4nICksXG4gICAgICAgIF90YWJDb250ZW50ID0gX29iai5maW5kKCAnLnRhYnNfX3dyYXBwZXInICksXG4gICAgICAgIF9jb250cm9scyA9IF9vYmouZmluZCggJy50YWJzX19jb250cm9scy13cmFwJyApLFxuICAgICAgICBfdGFiQ29udGVudEl0ZW0gPSBfdGFiQ29udGVudC5maW5kKCAnPiBkaXYnICk7XG5cbiAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICdsb2FkJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF9zaG93Q29udGVudFdoZW5Mb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF90YWJCdG5Jbm5lci5vbih7XG4gICAgICAgICAgICAgICAgbW91c2Vkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RhYkNvbnRlbnQuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogX3RhYkNvbnRlbnQuaW5uZXJIZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW91c2V1cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmVudC5pbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlQ29udGVudCA9IF90YWJDb250ZW50SXRlbS5lcSggaW5kZXggKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNvbnRlbnRIZWlnaHQgPSBhY3RpdmVDb250ZW50LmlubmVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIF90YWJDb250ZW50LmFuaW1hdGUoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiBhY3RpdmVDb250ZW50SGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGFiQ29udGVudC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSw0MDApXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyZW50LmluZGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIF90YWJCdG4ucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XG4gICAgICAgICAgICAgICAgICAgIF90YWJCdG4uZXEoIGluZGV4ICkuYWRkQ2xhc3MoICdhY3RpdmUnICk7XG4gICAgICAgICAgICAgICAgICAgIF9zaG93Q29udGVudCggaW5kZXggKTtcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRyb2xzLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfYm9keS5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRyb2xzLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG4gICAgICAgIF9zaG93Q29udGVudFdoZW5Mb2FkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfdGFiQnRuLmZpbHRlciggJy5hY3RpdmUnICkuaW5kZXgoKTtcbiAgICAgICAgICAgIGlmICggaW5kZXggPT0gJy0xJyApIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgX3RhYkJ0bi5lcSggaW5kZXggKS5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9zaG93Q29udGVudCggaW5kZXggKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3Nob3dDb250ZW50ID0gZnVuY3Rpb24oIGkgKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlQ29udGVudCA9IF90YWJDb250ZW50SXRlbS5lcSggaSApO1xuICAgICAgICAgICAgX3RhYkNvbnRlbnRJdGVtLmNzcygge1xuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRlbnQuY3NzKCB7XG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgIH07XG5cbiAgICBfaW5pdCgpO1xufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
