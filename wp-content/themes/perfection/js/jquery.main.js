$(function(){$(document).on("invalid.wpcf7",function(){$(".contact-form").find("fieldset").removeClass("novalid"),$(".contact-form").find(".wpcf7-not-valid-tip").each(function(){$(this).parents("fieldset").addClass("novalid")})}),$.each($(".drop-menu"),function(){new Menu($(this))}),$.each($(".preloader"),function(){new Preloader($(this))}),$.each($(".pixel-grid__slider"),function(){new SliderSingle($(this))}),$.each($(".formats__slider"),function(){new SliderFormats($(this))}),$.each($(".message-field"),function(){new MessageHigh($(this))})});var MessageHigh=function(e){var i=e,n=i.find(".contact-form__message"),t=i.find(".message-field__text"),o=i.find(".message-field__height"),s=function(){i.on({keydown:function(){t.html(n.val()+"___"),n.css("height",t.height()+25),o.css("height",t.height())}})},a=function(){s()};a()},Menu=function(e){var i,n=$(".drop-menu-btn"),t=$(".site__header"),o=$(".pages__item"),s=!1,a=$(".site"),r=$(window),l=function(){n.on({click:function(){return t.hasClass("site__header_drop-menu")?(a.css("height","auto"),t.removeClass("site__header_drop-menu"),r.scrollTop(siteScrollTop),!1):(siteScrollTop=r.scrollTop(),t.addClass("site__header_drop-menu"),setTimeout(function(){a.css("height","100%")},300),!1)}}),r.on({scroll:function(){s=r.scrollTop()>=t.innerHeight(),c(),d()},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;f(n)}},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;f(n)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>i?f(-1):i>n&&f(1),i=n}})},c=function(){o.each(function(){var e=$(this).offset().top,i=$(this).height(),n=160;e<=r.scrollTop()&&(t.removeClass("white"),t.addClass($(this).data("header-color"))),e<=r.scrollTop()+i-n&&e+i+n>=r.scrollTop()&&$(this).addClass("active")})},d=function(){r.scrollTop()>0?t.removeClass("header-top"):t.addClass("header-top")},f=function(e){e>0&&!t.hasClass("site__header_hidden")&&s&&t.addClass("site__header_hidden"),0>e&&t.hasClass("site__header_hidden")&&s&&t.removeClass("site__header_hidden")},h=function(){new IScroll("#scroll-wrap",{mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale"})},u=function(){c(),d(),h(),l()};u()},Preloader=function(e){var i=e,n=$(window),t=function(){n.on({load:function(){i.addClass("hide"),setTimeout(function(){i.remove()},400)}})},o=function(){t()};o()},SliderFormats=function(e){var i,n=this,t=e,o=t.find(">div"),s=o.find(".formats__slider-item"),a=s.find(".formats__slider-arrow"),r=o.find(".formats__slider-text"),l=r.find(">div"),c=0,d=$(window),f=function(){s.on({mouseenter:function(){d.width()>=992&&h($(this))}}),s.on({click:function(){return d.width()<992&&(h($(this)),clearInterval(i),v()),!1}}),t.on({mouseenter:function(){clearInterval(i)},mouseleave:function(){v()}}),d.on({resize:function(){u()}})},h=function(e){var n=e.index(),t=l.eq(n);s.removeClass("active"),e.addClass("active"),l.removeClass("visible"),t.addClass("visible"),clearInterval(i)},u=function(){c=d.width()<550?20:d.width()>=550&&d.width()<1200?70:54;var e=(o.width()+c)/2+"px",i=-90,n=s.length,t=360/n;s.each(function(n){var o=$(this),s=t*n+i,a=-1*s;o.css({"-webkit-transform":"rotate("+s+"deg) translate("+e+") rotate("+a+"deg)",transform:"rotate("+s+"deg) translate("+e+") rotate("+a+"deg)"})}),a.each(function(e){var n=$(this),o=t*e+i,s=-1*o,a=t*e;n.css({"-webkit-transform":"rotate("+o+"deg) rotate("+(s+a)+"deg)",transform:"rotate("+o+"deg) rotate("+(s+a)+"deg)"})})},v=function(){i=setInterval(function(){var e=s.filter(".active"),i=e.next(),n=i.index(),t=l.eq(n);-1==i.index()&&(i=s.eq(0),t=l.eq(0)),s.removeClass("active"),l.removeClass("visible"),i.addClass("active"),t.addClass("visible")},5e3)},m=function(){setTimeout(function(){var e=s.filter(".active"),i=e.index(),n=l.eq(i);n.addClass("visible"),r.addClass("visible-text"),v()},2e3)},_=function(){t[0].obj=n,u(),m(),f()};_()},SliderSingle=function(e){var i,n=this,t=e,o=t.find(".swiper-container"),s=function(){i=new Swiper(o,{pagination:$(".swiper-pagination"),paginationClickable:!0,loop:!0})},a=function(){s(),t[0].obj=n};a()};